<style>
  :root{
    --gap: 5px;
    --pad: 5px;
    --box-pad: 0px;
    --radius: 0px;
  }

  *{ box-sizing:border-box; margin:0; padding:0; }
  html,body{ height:100%; font-family:sans-serif; }

  /* --- Page layout --- */
  .cal-page{
    display:grid;
    background:#0b0f14;
    height:100vh;
    gap:var(--gap);
    padding:var(--pad);
    grid-template-columns:1fr;
    grid-template-rows:auto auto auto 1fr;
    grid-template-areas:
      "top-left"
      "middle-photo"
      "top-right"
      "bottom-half";
  }

  .cal-panel{
    padding:var(--box-pad);
    border-radius:var(--radius);
    color:#fff;
    overflow:auto;
    font-family:'Poiret One';
  }

  .top-left     { grid-area:top-left; background:#808080; }
  .middle-photo { grid-area:middle-photo; }
  .weather      { grid-area:top-right; }
  .bottom-half  { grid-area:bottom-half; }

  /* --- Photo background (blur fill + sharp contain) --- */
  .background-container{
    width:100%;
    height:100%;
    min-height:240px;
    position:relative;
    overflow:hidden;
  }

  .background-container::before,
  .background-container::after{
    content:"";
    position:absolute;
    inset:0;
    background-image:var(--bg-url);
    background-position:center;
  }

  .background-container::before{
    background-size:cover;
    filter:blur(22px);
    transform:scale(1.12);
    opacity:0.85;
    z-index:0;
  }

  .background-container::after{
    background-size:contain;
    background-repeat:no-repeat;
    z-index:1;
  }

  .background-container > *{
    position:relative;
    z-index:2;
  }

  .background-container.fallback{
    background:
      radial-gradient(circle at 30% 20%, rgba(255,255,255,.10), transparent 45%),
      linear-gradient(135deg, #1f3a5a, #0b0f14 55%, #3b1d2a);
  }

  /* --- Weather panel (no scroll, no clip) --- */
  .weather{
    overflow:hidden;
    display:flex;
    flex-direction:column;
  }

  .weather .temp{
    font-size:36px;
    font-weight:700;
    display:flex;
    align-items:center;
    justify-content:flex-end;
  }

  .weather .temp img{
    width:48px;
    height:auto;
    margin-left:10px;
  }

  .weather .wind-wrapper{
    display:flex;
    justify-content:flex-end;
  }

  .weather .wind-info{
    display:flex;
    align-items:center;
    justify-content:flex-end;
    gap:6px;
    text-align:right;
    margin-right:18px;
    opacity:0.85;
    font-size:14px;
    font-weight:500;
  }

  .weather .wind-arrow{
    font-size:18px;
    display:inline-block;
    transform: rotate(var(--wind-deg, 0deg));
    transition: transform 0.3s ease;
  }

  .weather .conditions{
    opacity:.90;
    font-size:13px;
    text-align:right;
    margin-right:18px;
  }

  .weather .updated{
    font-size:10px;
    text-align:right;
    opacity:.85;
    margin-top:4px;
    color: rgb(209, 244, 10)
  }

  .weather .error{
    color:red;
    font-weight:700;
    font-size:14px;
  }

  /* forecast row + cards */
  .weather .forecast-row{
    margin-top:10px;
    display:flex;
    justify-content:flex-end;
    gap:12px;
    flex-wrap:nowrap;
    overflow:hidden;
    padding-right: 12px;
  }

  .weather .forecast-card{
    font-family:'Quicksand', sans-serif;
    background: rgba(31, 41, 55, 0.50);
    padding: 12px;
    border-radius: 12px;
    width: 96px;
    flex: 0 0 76px;
    text-align:center;
    box-shadow: 0 2px 8px rgba(0,0,0,.35);
  }

  .weather .forecast-day{ font-size:12px; font-weight:700; opacity:.8; }
  .weather .forecast-icon{ width:32px; height:32px; margin: 0 auto; }
  .weather .forecast-hi{ font-size:18px; font-weight:700; color: #fca5a5; }
  .weather .forecast-lo{ font-size:14px; opacity:.85; color: #90cdf4}
  .weather .forecast-small{ font-size:10px; font-weight:700; margin-top:4px; color: #63b3ed}

  /* --- SmartCal strip (week row) --- */
  .bottom-half .smartcal-strip{
    padding:10px 12px;
    background:#0b0f14;
  }

  .bottom-half .smartcal-dow,
  .bottom-half .smartcal-days{
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap:8px;
  }

  .bottom-half .smartcal-dowItem{
    text-align:center;
    opacity:.7;
    font-size:20px;
  }

  .bottom-half .smartcal-day{
    text-align:center;
    padding:10px 0;
    font-size:14px;
  }

  .bottom-half .day-num{
    font-size:40px;
    line-height:1;
    padding: 0 0 12px 0;
  }

  .bottom-half .smartcal-day.today{
    color:#e11d48;
    font-weight:800;
  }

  .bottom-half .event-chip{
    border-radius:12px;
    padding:6px 8px;
    margin:6px 0;
    font-size:12px;
    text-align:left;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
    font-weight:600;
  }

  .bottom-half .event-time{ font-size:11px; opacity:0.9; }
  .bottom-half .event-title{ font-size:12px; }

  .event-chip.person-mike{ background-color: #BFDBFE; color: black; }
  .event-chip.person-wife{ background-color: #FBCFE8; color: black; }
  .event-chip.person-kid1{ background-color: #BBF7D0; color: black; }
  .event-chip.person-kid2{ background-color: #E9D5FF; color: black; }

  .event-chip.empty{
    background-color: transparent;
    color: #888;
    text-align: center;
  }

  /* --- Desktop layout --- */
  @media (min-width:768px){
    .cal-page{
      grid-template-columns:repeat(3, 1fr);
      grid-template-rows:repeat(2, minmax(0,1fr));
      grid-template-areas:
        "top-left middle-photo top-right"
        "bottom-half bottom-half bottom-half";
    }
  }
</style>